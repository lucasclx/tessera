<div class="auth-container">
    <div class="auth-card">
      <div class="auth-header">
        <h2>Registro de Novo Usu√°rio</h2>
        <p>Preencha o formul√°rio para criar sua conta</p>
      </div>
      
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="form-group">
          <label for="nome">Nome Completo</label>
          <input 
            type="text" 
            id="nome" 
            formControlName="nome"
            class="form-control" 
            [ngClass]="{'is-invalid': submitted && f['nome'].errors}"
            placeholder="Digite seu nome completo"
          >
          <div *ngIf="submitted && f['nome'].errors" class="invalid-feedback">
            <div *ngIf="f['nome'].errors?.['required']">Nome √© obrigat√≥rio</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="username">Nome de Usu√°rio</label>
          <input 
            type="text" 
            id="username" 
            formControlName="username"
            class="form-control" 
            [ngClass]="{'is-invalid': submitted && f['username'].errors}"
            placeholder="Crie seu nome de usu√°rio"
          >
          <div *ngIf="submitted && f['username'].errors" class="invalid-feedback">
            <div *ngIf="f['username'].errors?.['required']">Nome de usu√°rio √© obrigat√≥rio</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="email">Email</label>
          <input 
            type="email" 
            id="email" 
            formControlName="email"
            class="form-control" 
            [ngClass]="{'is-invalid': submitted && f['email'].errors}"
            placeholder="Digite seu email"
          >
          <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
            <div *ngIf="f['email'].errors?.['required']">Email √© obrigat√≥rio</div>
            <div *ngIf="f['email'].errors?.['email']">Formato de email inv√°lido</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="institution">Institui√ß√£o</label>
          <input 
            type="text" 
            id="institution" 
            formControlName="institution"
            class="form-control" 
            [ngClass]="{'is-invalid': submitted && f['institution'].errors}"
            placeholder="Digite o nome da sua institui√ß√£o"
          >
          <div *ngIf="submitted && f['institution'].errors" class="invalid-feedback">
            <div *ngIf="f['institution'].errors?.['required']">Institui√ß√£o √© obrigat√≥ria</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="password">Senha</label>
          <div class="input-group">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              id="password" 
              formControlName="password"
              class="form-control" 
              [ngClass]="{'is-invalid': submitted && f['password'].errors}"
              placeholder="Crie uma senha forte"
            >
            <button 
              type="button" 
              class="password-toggle" 
              (click)="togglePasswordVisibility()">
              <i [class]="showPassword ? 'icon-eye-off' : 'icon-eye'"></i>
            </button>
          </div>
          <div *ngIf="submitted && f['password'].errors" class="invalid-feedback">
            <div *ngIf="f['password'].errors?.['required']">Senha √© obrigat√≥ria</div>
            <div *ngIf="f['password'].errors?.['minlength']">Senha deve ter no m√≠nimo 6 caracteres</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirmPassword">Confirmar Senha</label>
          <div class="input-group">
            <input 
              [type]="showConfirmPassword ? 'text' : 'password'" 
              id="confirmPassword" 
              formControlName="confirmPassword"
              class="form-control" 
              [ngClass]="{'is-invalid': submitted && (f['confirmPassword'].errors || registerForm.errors?.['passwordMismatch'])}"
              placeholder="Repita sua senha"
            >
            <button 
              type="button" 
              class="password-toggle" 
              (click)="toggleConfirmPasswordVisibility()">
              <i [class]="showConfirmPassword ? 'icon-eye-off' : 'icon-eye'"></i>
            </button>
          </div>
          <div *ngIf="submitted && f['confirmPassword'].errors" class="invalid-feedback">
            <div *ngIf="f['confirmPassword'].errors?.['required']">Confirma√ß√£o de senha √© obrigat√≥ria</div>
          </div>
          <div *ngIf="submitted && registerForm.errors?.['passwordMismatch']" class="invalid-feedback">
            As senhas n√£o coincidem
          </div>
        </div>
        
        <div class="form-group">
          <label>Perfil</label>
          <div class="role-selector">
            <div class="role-option">
              <input type="radio" id="role-aluno" formControlName="role" value="ALUNO" checked>
              <label for="role-aluno" class="role-label">
                <span class="role-icon student">üë®‚Äçüéì</span>
                <span class="role-title">Aluno</span>
                <span class="role-desc">Acesso a notas, aulas e material did√°tico</span>
              </label>
            </div>
            <div class="role-option">
              <input type="radio" id="role-professor" formControlName="role" value="PROFESSOR">
              <label for="role-professor" class="role-label">
                <span class="role-icon teacher">üë®‚Äçüè´</span>
                <span class="role-title">Professor</span>
                <span class="role-desc">Gerenciamento de turmas e avalia√ß√µes</span>
                <span class="approval-note">Requer aprova√ß√£o</span>
              </label>
            </div>
          </div>
          <div *ngIf="submitted && f['role'].errors" class="invalid-feedback">
            <div *ngIf="f['role'].errors?.['required']">Escolha um perfil</div>
          </div>
        </div>
        
        <div *ngIf="successMessage" class="alert alert-success">
          {{ successMessage }}
        </div>
        
        <div *ngIf="errorMessage" class="alert alert-danger">
          {{ errorMessage }}
        </div>
        
        <div class="form-actions">
          <button 
            type="submit" 
            class="btn btn-primary btn-block" 
            [disabled]="loading">
            <span *ngIf="loading" class="spinner"></span>
            <span>{{ loading ? 'Registrando...' : 'Registrar' }}</span>
          </button>
        </div>
        
        <div class="auth-footer">
          <p>J√° tem uma conta? <a routerLink="/auth/login">Fa√ßa login</a></p>
        </div>
      </form>
    </div>
  </div>